<?php if (!defined("BASEPATH")) { exit("No direct script access allowed"); } class Dashboard_model extends CI_Model { public function __construct() { parent::__construct(); } public function getEstatisticas() { $sql = "SELECT (SELECT COUNT(*) FROM os) as total_os, (SELECT COUNT(*) FROM clientes) as total_clientes, (SELECT COUNT(*) FROM produtos) as total_produtos, (SELECT COUNT(*) FROM servicos) as total_servicos, (SELECT SUM(valor) FROM lancamentos WHERE tipo = 'receita' AND baixado = 1) as total_receitas, (SELECT SUM(valor) FROM lancamentos WHERE tipo = 'despesa' AND baixado = 1) as total_despesas"; return $this->db->query($sql)->row(); } }

